<html>
<head>
<title>JS勉強会_課題</title>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
    <script language="JavaScript">
    <!--
    disp    = "0";
    disp2    = "0";
    flag    = 0;
    function push(val) {
        if(val >= 0 && val <= 9) {            //　電卓に表示する数列を作成
            if(flag == 0) {
                disp    = val;
                disp2    = "0";
                flag    = 1;
            }
            else {
                disp    = disp + val;
                disp    = parseFloat(disp);
            }
        }
        else if(val == "Ｃ") {                //　クリア
            disp    = "0";
            disp2    = "0";
            flag    = 0;
        }
        else {
            if(disp) {
                switch(flag) {            //　計算
                case 1:disp2 = parseFloat(disp2) + parseFloat(disp); break;
                case 2:disp2 = parseFloat(disp2) - parseFloat(disp); break;
                case 3:disp2 = parseFloat(disp2) * parseFloat(disp); break;
                case 4:disp2 = parseFloat(disp2) / parseFloat(disp); break;
                }
            }
            if(val == "＝") {            //　計算方法を記憶
                flag    = 0;
                disp    = disp2;
            }
            else if(val == "＋") {
                flag    = 1;
                disp    = "";
            }
            else if(val == "−") {
                flag    = 2;
                disp    = "";
            }
            else if(val == "×") {
                flag    = 3;
                disp    = "";
            }
            else if(val == "÷") {
                flag    = 4;
                disp    = "";
            }
        }
        document.form1.disp.value = disp        //　電卓に表示
    }
    //-->
    </script>
<script type="text/javascript"><!--
	myTotal = 0;	// 現在の合計値
	myInput = "";	// 現在入力している値
	myCalc = "+";	// 合計と入力値の演算子
	myFlg = 1;	// １回前に入力したもの 0:数字 1:演算子
 	
	function num(myData){	// 0〜9または小数点ボタンを押した
		myFlg = 0;	// １回前に入力したものは数値
		myInput += myData;	// 現在入力している値に追加
		document.myForm.myLine.value = myInput;	// 現在入力している値表示
	}
 	
	function calculate(myData){	// 演算ボタンを押した
		if (myFlg==0){	// １回前に入力したものは数値か？
			myFlg = 1;	// １回前に入力したものは演算子
			myWork = myTotal + myCalc + myInput;	// 一連の計算式を作る
			myTotal = eval(myWork);	// 計算式を計算させる
			myInput = "";	// 現在入力している値をクリア
			document.myForm.myLine.value = myTotal;	// 合計を表示
		}
		if (myData == "="){	// 演算ボタンは[＝]か？
			myTotal = 0;	// 合計をクリア
			myCalc = "+";	// 演算子を[+]とする
		}else{	// 演算ボタンは[＝]以外である
			myCalc = myData;	// 演算子を退避させておく
		}
	}
 	
	function clear(){	// クリアボタン[C]を押した
		myTotal = 0;	// 合計クリア
		myCalc = "+";	// 演算子クリア
		myInput = "";	// 現在入力している値をクリア
		document.myForm.myLine.value = myTotal;	// つまり、０を表示
	}
// -->
</script>
<style>
<!--
	input {
		width:    100%;
		height: 100%;
		font-size:    30px;
	}
	.answer {
		text-align:    right;
		font-size:    35px;
	}
//-->
</style>
</head>
<body>
<form name="form1" action="" method="">
<table width="250" height="250" border="1" bordercolor="#000000" cellspacing="0" cellpadding="0">
    <tr>
        <td colspan="4"><input type="text" name="answer" class="answer" value="0"></td>
    </tr>
    <tr>
        <td width="25%"><input type="button" value="7" onClick="push(this.value)"></td>
        <td width="25%"><input type="button" value="8" onClick="push(this.value)"></td>
        <td width="25%"><input type="button" value="9" onClick="push(this.value)"></td>
        <td width="25%"><input type="button" value="÷" onClick="push(this.value)"></td>
    </tr>
    <tr>
        <td><input type="button" value="4" onClick="push(this.value)"></td>
        <td><input type="button" value="5" onClick="push(this.value)"></td>
        <td><input type="button" value="6" onClick="push(this.value)"></td>
        <td><input type="button" value="×" onClick="push(this.value)"></td>
    </tr>
    <tr>
        <td><input type="button" value="1" onClick="push(this.value)"></td>
        <td><input type="button" value="2" onClick="push(this.value)"></td>
        <td><input type="button" value="3" onClick="push(this.value)"></td>
        <td><input type="button" value="−" onClick="push(this.value)"></td>
    </tr>
    <tr>
        <td><input type="button" value="0" onClick="push(this.value)"></td>
        <td><input type="button" value="Ｃ" onClick="push(this.value)"></td>
        <td><input type="button" value="＝" onClick="push(this.value)"></td>
        <td><input type="button" value="＋" onClick="push(this.value)"></td>
    </tr>
</table>
</form>
</body>
</html>